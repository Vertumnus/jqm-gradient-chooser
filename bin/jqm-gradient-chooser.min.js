/*! jqm-gradient-chooser (C)Armin Junge 16-09-2017 */

$.widget("vertumnus.gradientchooser",$.mobile.collapsible,{options:{actionIcon:"action",fromIcon:"carat-r",toIcon:"carat-l",colorFrom:"#000000",colorTo:"#000000"},_create:function(){let i=`\n<div class="ui-grid-b ui-gradient">\n   <div class="ui-block-a">\n      <a href="#" class="ui-btn ui-corner-all ui-btn-icon-notext ui-icon-${this.options.fromIcon}"></a>\n   </div>\n   <div class="ui-block-b">\n      <a href="#" class="ui-btn ui-corner-all ui-btn-icon-notext ui-icon-${this.options.actionIcon}"></a>\n   </div>\n   <div class="ui-block-c">\n      <a href="#" class="ui-btn ui-corner-all ui-btn-icon-notext ui-icon-${this.options.toIcon}"></a>\n   </div>\n</div>`;this.element.append(i),this._super(),this.element.find(".ui-gradient .ui-block-a a").click({widget:this,cb:"clickFrom"},this._click),this.element.find(".ui-gradient .ui-block-c a").click({widget:this,cb:"clickTo"},this._click),this.element.find(".ui-gradient .ui-block-b a").click({widget:this,cb:"apply"},this._click),this.colorFrom(this.options.colorFrom),this.colorTo(this.options.colorTo)},_setOption:function(i,o){switch(i){case"actionIcon":o=this._replaceActionIcon(o);break;case"fromIcon":o=this._replaceFromIcon(o);break;case"toIcon":o=this._replaceToIcon(o);break;case"colorFrom":this.colorFrom(o);break;case"colorTo":this.colorTo(o)}this._super(i,o)},_click:function(i){i.data.widget._trigger(i.data.cb,i)},_replaceActionIcon:function(i){return this._replaceIcon(this.element.find(".ui-gradient .ui-block-b a"),i)},_replaceFromIcon:function(i){return this._replaceIcon(this.element.find(".ui-gradient .ui-block-a a"),i)},_replaceToIcon:function(i){return this._replaceIcon(this.element.find(".ui-gradient .ui-block-c a"),i)},_replaceIcon:function(i,o){return o||(o="no"),i.removeClass(function(i,o){return o.split(" ").filter(function(i){return/ui-icon-.+/.test(i)}).toString()}).addClass("ui-icon-"+o),o},colorFrom:function(i){return void 0===i?this._colorFrom:this._isColor(i)?(this._colorFrom=i,void this._setGradient()):null},colorTo:function(i){return void 0===i?this._colorTo:this._isColor(i)?(this._colorTo=i,void this._setGradient()):null},_isColor:function(i){return/#[0-9a-fA-F]{6}/.test(i)||/rgb\(\d{1,3}, \d{1,3}, \d{1,3}\)/.test(i)},_setGradient:function(){this.element.children(".ui-collapsible-content").css("background-image",`linear-gradient(to right, ${this._colorFrom} 0%, ${this._colorTo} 100%)`)}});